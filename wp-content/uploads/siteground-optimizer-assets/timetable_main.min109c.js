jQuery(document).ready(function(a){"use strict";var b=a(),e,f,l,g;a(".tt_tabs_navigation a").on("click",function(c){var b=a(this);b.parent().parent().find("li").removeClass("ui-tabs-active"),b.parent().addClass("ui-tabs-active")}),a(".tt_tabs").tabs({event:"change",show:!0,create:function(f,c){b=c.panel.closest(".tt_wrapper"),b.find(".tt_tabs_navigation.all_filters").length&&window.location.href.indexOf("book-event-hour-")===-1&&(c.tab.length&&b.find(".tt_tabs_navigation.events_categories_filter a[href='"+c.tab[0].children[0].hash+"']").length?b.find(".tt_tabs_navigation.events_categories_filter a[href='"+c.tab[0].children[0].hash+"']").parent().addClass("ui-tabs-active"):b.find(".tt_tabs_navigation.events_categories_filter li:first-child a").parent().addClass("ui-tabs-active"),c.tab.length&&b.find(".tt_tabs_navigation.events_filter a[href='"+c.tab[0].children[0].hash+"']").length?b.find(".tt_tabs_navigation.events_filter a[href='"+c.tab[0].children[0].hash+"']").parent().addClass("ui-tabs-active"):b.find(".tt_tabs_navigation.events_filter li:first-child a").parent().addClass("ui-tabs-active"));var e=d(a.param.fragment());e!=""&&a('#'+e).closest(".tt_wrapper").length&&a("html, body").animate({scrollTop:a('#'+e).closest(".tt_wrapper").offset().top-80},400)}}),a(".tt_tabs .ui-tabs-nav a").on("click",function(){a(this).attr("href").substr(0,4)!="http"?a.bbq.pushState(a(this).attr("href")):window.location.href=a(this).attr("href")}),a(".tabs_box_navigation").mouseover(function(){a(this).find("ul").removeClass("tabs_box_navigation_hidden")}),a(".tabs_box_navigation a").on("click",function(b){(a.param.fragment()==a(this).attr("href").replace("#","")||a.param.fragment()==""&&a(this).attr("href").replace("#","").substr(0,10)=="all-events")&&b.preventDefault(),a(this).parent().parent().find(".selected").removeClass("selected"),a(this).parent().addClass("selected"),a(this).parent().parent().parent().children("label").text(a(this).text()),a(this).parent().parent().addClass("tabs_box_navigation_hidden")}),a(".tt_tabs_navigation:not(.all_filter) a, .tabs_box_navigation:not(.all_filter) a").on("click",function(l){var j,i,c,h,g,e,f,k;l.preventDefault(),j=a(this),b=j.closest(".tt_wrapper"),f="all-events"+(typeof b.attr("id")!="undefined"?"-"+b.attr("id"):""),i=j.attr("href"),h=window.location.href.indexOf("#")!==-1?window.location.href.indexOf("#"):window.location.href.length,g=b.find(".events_filter .selected a").length?b.find(".events_filter .selected a").attr("href").replace("#",""):b.find(".events_filter .ui-tabs-active a").length?b.find(".events_filter .ui-tabs-active a").attr("href").replace("#",""):"",e=b.find(".events_categories_filter .selected a").length?b.find(".events_categories_filter .selected a").attr("href").replace("#",""):b.find(".events_categories_filter .ui-tabs-active a").length?b.find(".events_categories_filter .ui-tabs-active a").attr("href").replace("#",""):"",b.find(".tt_error_message").addClass("tt_hide"),g!==""&&e!==""?g!==f&&e!==f&&b.find("[id='"+g+"'][class*='tt-event-category-"+e.toLowerCase()+"']").length||e===f?(c=d(window.location.href.substr(0,h))+decodeURIComponent("#"+g),window.location.href!=c&&(window.location.href=c)):g===f&&e!==f?(c=d(window.location.href.substr(0,h))+decodeURIComponent("#"+e),window.location.href!=c&&(window.location.href=c)):(k=a(document).scrollTop(),c=d(window.location.href.substr(0,h))+"#",window.location.href!=c&&(window.location.href=c),b.find(".tt_tabs").tabs("option","collapsible",!0),b.find(".tt_tabs").tabs("option","active",!1),b.find(".tt_error_message").removeClass("tt_hide"),a("html, body").scrollTop(k)):(c=d(window.location.href.substr(0,h))+decodeURIComponent(i),window.location.href!=c&&(window.location.href=c))}),a(window).on("hashchange",function(c){var b=d(a.param.fragment());a(".tabs_box_navigation a[href='#"+b+"']").trigger("click"),a(".tt_tabs .ui-tabs-nav [href='#"+b+"']").trigger("change"),a(".tabs_box_navigation a[href='#"+encodeURIComponent(b)+"']").trigger("click"),a(".tt_tabs .ui-tabs-nav [href='#"+encodeURIComponent(b)+"']").trigger("change")}).trigger("hashchange"),a(".tt_tooltip").on("mouseover click",function(){var c=a(this),d=c,b,e,f,g;c.is(".event_container")&&(d=c.parent()),b=c.children(".tt_tooltip_text"),b.css("width",c.outerWidth()+"px"),b.css("height",b.height()+"px"),a('body').hasClass('rtl')?(e=d.position(),f=e.top-b.innerHeight()+"px",g=e.left+"px"):(f=-(b.parent().offset().top-d.offset().top+b.innerHeight())+"px",g="0px"),b.css({top:f,left:g})}),a("body.rtl .booking_hover_buttons td.event").on("mouseover click",function(){var b=a(this),e=50,c,d;b.hasClass("tt_single_event")?(c=Math.ceil(b[0].getBoundingClientRect().height),d=Math.ceil(b[0].getBoundingClientRect().width),b.find(".event_hour_booking_wrapper.on_hover").css({top:b.position().top+c-e,left:b.position().left,width:d})):b.find(".event_container").each(function(){var b=a(this),f=b.find(".event_hour_booking_wrapper.on_hover");c=Math.ceil(b[0].getBoundingClientRect().height),d=Math.ceil(b[0].getBoundingClientRect().width),f.css({top:b.position().top+c-e,left:b.position().left,width:d})})}),a(".tt_upcoming_events").each(function(){for(var b=a(this),e=0,d=b.attr("class").split(" "),c=0;c<d.length;c++)d[c].indexOf("autoscroll-")!=-1&&(e=d[c].replace("autoscroll-",""));b.carouFredSel({direction:"up",items:{visible:b.children().length>2?3:b.children().length,height:"variable"},scroll:{items:1,easing:"swing",pauseOnHover:!0},prev:{button:b.next().children("#upcoming_event_prev")},next:{button:b.next().children("#upcoming_event_next")},auto:{play:!!parseInt(e)}}),b.find("li a.tt_upcoming_events_event_container, li>span").on({mouseenter:function(){b.trigger("configuration",["debug",!1,!0])},mouseleave:function(){setTimeout(function(){b.trigger("configuration",["debug",!1,!0])},1)}})}),a(window).resize(function(){a(".tt_upcoming_events").trigger("configuration",["debug",!1,!0])}),a(document.body).on("click",".tt_timetable.small .plus.box_header",function(d){var b=a(this),c=b.next("ul.tt_items_list");c.slideDown(500),b.removeClass("plus"),b.addClass("minus")}),a(document.body).on("click",".tt_timetable.small .minus.box_header",function(d){var b=a(this),c=b.next("ul.tt_items_list");c.slideUp(500,function(){b.removeClass("minus"),b.addClass("plus")})}),a(".tt_booking").length&&a(".tt_booking_overlay").length&&(a(".tt_booking_overlay").slice(1).remove(),a(".tt_booking_overlay").appendTo("body"),a(".tt_booking").slice(1).remove(),a(".tt_booking").appendTo("body")),a(".tt_booking").length&&o()&&a(".tt_booking").addClass("in_iframe"),a(document.body).on("click",".event_hour_booking:not(.redirect)",n),a(document.body).on("click",".tt_booking_overlay",h),a(document.body).on("touchend",".tt_booking_overlay",function(a){f!=!0&&h()}).on("touchmove",".tt_booking_overlay",function(a){f=!0}).on("touchstart",".tt_booking_overlay",function(a){f=!1});function n(k){k.preventDefault();var f=a(this),i=a('.tt_booking'),g=i.find('.tt_booking_message'),l=i.find('.tt_preloader'),h=f.attr('data-event-hour-id'),d=window.location.href;if(b=f.closest('.tt_wrapper'),e=a.parseJSON(b.find('.timetable_atts').val()),d.indexOf('#')===-1?d=d+'#book-event-hour-'+h:d=d.substr(0,d.indexOf('#'))+'#book-event-hour-'+h,f.hasClass('unavailable')||f.hasClass('booked'))return;g.html(''),p(k),c(),g.attr('data-event-hour-id',h),a.post(tt_config.ajaxurl,{action:'timetable_ajax_event_hour_details',redirect_url:d,event_hour_id:h,atts:e},function(a){l.addClass('tt_hide'),a=j(a),typeof(a.msg!=='undefined')&&(a.error?g.html('<p>'+a.msg+'</p><div><a href="#" class="tt_btn cancel">'+e.cancel_popup_label+'</a></div>'):g.html(a.msg),c())},"html")}a(document.body).on('click','.tt_booking .tt_btn.book',m);function m(k){k.preventDefault();var f=a(this),d=a('.tt_booking'),g=d.find('.tt_booking_message'),i=d.find('.tt_preloader'),q=d.find('.tt_slots_number').val(),l=d.find('.tt_guest_name').val(),m=d.find('.tt_guest_email').val(),n=d.find('.tt_guest_phone').val(),o=d.find('.tt_guest_message').val(),p=d.find('.tt_terms_checkbox').is(':checked'),h=g.attr('data-event-hour-id');f.qtip('destroy').removeClass('tt-qtip2'),g.addClass('tt_hide'),i.removeClass('tt_hide'),c(),a.post(tt_config.ajaxurl,{action:'timetable_ajax_event_hour_booking',event_hour_id:h,atts:e,slots_number:q,guest_name:l,guest_email:m,guest_phone:n,guest_message:o,terms_checkbox:p},function(a){i.addClass('tt_hide'),g.removeClass('tt_hide'),c(),a=j(a),typeof a.msg!='undefined'&&(a.error?(f.addClass('tt-qtip2').qtip({style:{classes:'ui-tooltip-error tt-qtip2'},content:{text:a.msg},position:{my:'bottom center',at:'top center',target:f}}),setTimeout(function(){f.qtip('show')},200)):(g.html(a.msg),c(),b.find(".event_hour_booking.id-"+h).parent().replaceWith(a.booking_button),typeof a.available_slots_label!='undefined'&&b.find('.available_slots.id-'+h).html(a.available_slots_label)))},"html")}function k(){var b=100,d=1e3;(function(){var e,f,g,h,i,k,l,j;g=function(){clearInterval(e),clearTimeout(f),e=null,f=null,c()},e=setInterval(function(){h=a(window).width(),i=a(window).height(),h===k&&i===l?(j++,j===b&&g()):(k=h,l=i,j=0)}),f=setTimeout(function(){g()},d)})()}a(document.body).on('click','.tt_guest_option a',function(d){d.preventDefault();var b=a('.tt_booking'),e=b.find('.tt_booking_form.user'),f=b.find('.tt_booking_form.guest');e.addClass('tt_hide'),f.removeClass('tt_hide'),a(this).parent().addClass('tt_hide').next('.tt_login_option').removeClass('tt_hide'),b.find('.tt_btn.login').addClass('tt_hide'),b.find('.tt_btn.book').removeClass('tt_hide'),c()}),a(document.body).on('click','.tt_slots_number_plus, .tt_slots_number_minus',function(h){h.preventDefault();var i=a('.tt_booking'),g=i.find('.tt_booking_form'),c=g.find('.tt_slots_number'),b=parseInt(c.val()),f=parseInt(c.attr('min')),d=parseInt(c.attr('max')),e=parseInt(c.attr('step'));isNaN(b)&&(b=1),a(this).hasClass('tt_slots_number_plus')&&(b<d?b+=e:b=d),a(this).hasClass('tt_slots_number_minus')&&(b>f?b-=e:b=f),c.val(b)}),a(document.body).on('click','.tt_btn.cancel, .tt_btn.continue',function(a){a.preventDefault(),h(a)});function i(){var b=a('.tt_booking'),d=parseInt(b.css('margin-left')),i=b.outerWidth(),h=b.css('width','').outerWidth(),c,g,f,k,l,m,e,j,n;return b.css('width',i),g=b.hasClass('in_iframe')?a(parent.window).height():a(window).height(),f=b.hasClass('in_iframe')?a(parent.window).width():a(window).width(),k=a(document).scrollTop()>=a(parent.document).scrollTop()?a(document).scrollTop():a(parent.document).scrollTop(),h+d*2>=f?c=f-d*2:c=h,l=(f-c-d*2)/2,m=b.outerHeight(),e=b.css({width:c,height:''}).outerHeight(),b.css({width:i,height:m}),j=k,e<g&&(j+=(g-e)/2),n={top:j,left:l,width:c,height:e},n}function p(f){var c=a(".tt_booking"),d=a(".tt_booking_overlay"),e=c.find('.tt_preloader'),b;d.removeClass("tt_hide"),c.removeClass("tt_hide"),e.removeClass('tt_hide'),d.css({height:a(document).height()}),b=i(),c.css({top:b.top,left:b.left,width:b.width,height:b.height})}function h(){var b=a(".tt_booking"),c=a(".tt_booking_overlay");return b.find('.tt-qtip2').qtip('destroy').removeClass('tt-qtip2'),b.addClass("tt_hide"),c.addClass("tt_hide"),b.css({top:"",left:"",width:"",height:""}),window.location.href.indexOf("book-event-hour-")!==-1&&(window.location.href=d(window.location.href.substr(0,window.location.href.indexOf("#")))+"#"),!1}function c(){var c=a('.tt_booking'),d=a(".tt_booking_overlay"),b;if(c.hasClass('tt_hide'))return;d.css({height:a(document).height()}),b=i(),c.stop(!1,!0).animate({top:b.top,left:b.left,width:b.width,height:b.height},200)}(function(){var d,b=!1,c=200;a(window).resize(function(){d=new Date,b===!1&&(b=!0,setTimeout(e,c))});function e(){new Date-d<c?setTimeout(e,c):(b=!1,a(window).trigger('resize_end'))}})(),a(window).on('resize_end',c),window.addEventListener('orientationchange',k),window.location.href.indexOf('book-event-hour-')!==-1&&(l=window.location.href.substr(window.location.href.indexOf('book-event-hour-')+16),g=a('a.event_hour_booking.id-'+l).eq(0),g.length&&(a('html, body').animate({scrollTop:g.offset().top-80},400),g.trigger("click")));function d(b){return a('<div/>').text(b).html()}a('form.tt_generate_pdf').on('submit',function(f){var e=a(this),d,c;return b=e.closest('.tt_wrapper'),d=b.find('.tt_tabs div.ui-tabs-panel:visible .tt_timetable.small').clone(),d.find('*').attr('style',''),c=d[0].outerHTML,a('body').hasClass('rtl')&&(c="<div class='rtl'>"+c+"</div>"),e.find("textarea[name='tt_pdf_html_content']").val(c),!0});function o(){try{return window.self!==window.top}catch(a){return!0}}function j(b){var c=b.indexOf('timetable_start')+15,d=b.indexOf('timetable_end')-c;return a.parseJSON(b.substr(c,d))}})